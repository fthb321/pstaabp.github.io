<!DOCTYPE html>  
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>ch03</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style id="mkstylesheet">
body{-webkit-font-smoothing:antialiased;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;margin:30px 0 0;padding:0;background:#fff}#wrapper{padding:20px}li{font-size:110%}li li{font-size:100%}li p{font-size:100%;margin:.5em 0}h1{color:#000}h2{color:#111}h3{color:#111;margin:0}h4{color:#111}h5{color:#111}h6{font-size:1em;line-height:1.5em;margin:1.5em 0}body,p,td,div{color:#111;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;word-wrap:break-word}a{color:#0d6ea1;text-decoration:none;-webkit-transition:color .2s ease-in-out;-moz-transition:color .2s ease-in-out;-o-transition:color .2s ease-in-out;-ms-transition:color .2s ease-in-out;transition:color .2s ease-in-out}a:hover{color:#3593d9}body{font-size:15px;line-height:21px;margin:0 auto}h1{font-size:37px;line-height:42px;margin-top:42px;margin-bottom:21px}h2{font-size:27px;line-height:42px;margin-top:42px;margin-bottom:21px}h3{font-size:20px;line-height:21px;margin-top:21px;margin-bottom:21px}h4{font-size:20px;line-height:21px;margin-top:21px;margin-bottom:21px}p,ul,ol,pre,table,blockquote{margin-top:21px;margin-bottom:21px}hr{border:1px solid;margin:-1px 0}ul ul,ol ol,ul ol,ol ul{margin-top:0;margin-bottom:0}b,strong,em,small,code{line-height:1}.footnote{color:#0d6ea1;font-size:.8em;vertical-align:super}abbr,acronym{border-bottom:1px dotted #aaa}#wrapper img{max-width:100%;height:auto}dd{font-size:1em;margin-bottom:1em}li>p:first-child{margin:0}ul,ol{padding-left:1.5em}#wrapper ol{list-style-position:inside}ul ul,ul ol{margin-bottom:.4em}caption,col,colgroup,table,tbody,td,tfoot,th,thead,tr{border-spacing:0}table{border:1px solid rgba(0,0,0,0.25);border-collapse:collapse;display:table;empty-cells:hide;margin:-1px 0 1.3125em;padding:0;table-layout:fixed}caption{display:table-caption;font-weight:700}col{display:table-column}colgroup{display:table-column-group}tbody{display:table-row-group}tfoot{display:table-footer-group}thead{display:table-header-group}td,th{display:table-cell}tr{display:table-row}table th,table td{font-size:1.1em;line-height:1.3;padding:.5em 1em 0}table thead{background:rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.15);border-bottom:1px solid rgba(0,0,0,0.2)}table tbody{background:rgba(0,0,0,0.05)}table tfoot{background:rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.15);border-top:1px solid rgba(0,0,0,0.2)}figure{display:inline-block;overflow:hidden;position:relative;margin:1em 0 2em}figcaption{font-style:italic;text-align:center;background:white;color:#666}.poetry pre{display:block;font-family:Georgia,Garamond,serif !important;font-size:110% !important;font-style:italic;line-height:1.6em;margin-left:1em}.poetry pre code{font-family:Georgia,Garamond,serif !important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}blockquote p{font-size:110%;font-style:italic;line-height:1.6em}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;position:relative;vertical-align:super}sub{vertical-align:sub;top:-1px}p,h5{font-size:1.1429em;line-height:1.3125em;margin:1.3125em 0}dt,th{font-weight:700}table tr:nth-child(odd),table th:nth-child(odd),table td:nth-child(odd){background:rgba(255,255,255,0.06)}table tr:nth-child(even),table td:nth-child(even){background:rgba(200,200,200,0.25)}@media print{img,table,figure{page-break-inside:avoid}#wrapper{background:#fff;color:#303030;padding:10px;position:relative;text-indent:0}}@media screen{.inverted{background:#252a2a}.inverted #wrapper{background:#252a2a;color:#eee}.inverted hr{border-color:#333f40 !important}.inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dt,.inverted dd{color:#eee}.inverted pre{background:#ccc;color:#111}.inverted table{background:none}.inverted table tr:nth-child(odd),.inverted table td:nth-child(odd){background:none}.inverted a{color:#acd1d5}::selection{background:rgba(157,193,200,0.5)}h1::selection{background-color:rgba(45,156,208,0.3)}h2::selection{background-color:rgba(90,182,224,0.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,0.3)}code::selection{background-color:rgba(0,0,0,0.7);color:#eee}code span::selection{background-color:rgba(0,0,0,0.7) !important;color:#eee !important}a::selection{background-color:rgba(255,230,102,0.2)}.inverted a::selection{background-color:rgba(255,230,102,0.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,0.5)}}
#mkreplaced-toc{list-style-position:inside;padding:0;margin:0 0 0 1rem;list-style-type:none}#mkreplaced-toc li::before{content:''}#mkreplaced-toc li{font-size:1rem;line-height:1.25;font-weight:normal}#mkreplaced-toc li ul{font-size:1.3rem;font-weight:300;padding:.5rem 0;margin:0 0 0 1rem}#mkreplaced-toc li.missing{list-style-type:none !important}#mkreplaced-toc.max-1 ul,#mkreplaced-toc.max1 ul{display:none}#mkreplaced-toc.max-2 ul ul,#mkreplaced-toc.max2 ul ul{display:none}#mkreplaced-toc.max-3 ul ul ul,#mkreplaced-toc.max3 ul ul ul{display:none}#mkreplaced-toc.max-4 ul ul ul ul,#mkreplaced-toc.max4 ul ul ul ul{display:none}#mkreplaced-toc.max-5 ul ul ul ul ul,#mkreplaced-toc.max5 ul ul ul ul ul{display:none}.rtl{direction:rtl;text-align:right}@media print{body{background:white;line-height:1.4}html,body,#wrapper{max-width:100%;width:100%;-webkit-text-size-adjust:none;-webkit-perspective:none !important;box-sizing:border-box;width:auto;border:0;margin:0;padding:0;float:none;-moz-box-shadow:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}mark{background:transparent !important}h1,h2,h3,h4,h5,h6{page-break-after:avoid}p,h2,h3{orphans:3;widows:3}section{page-break-before:avoid}pre>code{white-space:pre;word-break:break-word}#generated-toc,#firstdiff,#toc-title,#mkdocumentprogress,#mkincludechart,#mkprogressbar1,#mkprogressbar2,.mkscrollmeter,#alllinks,.popup{display:none !important}.suppressprintlinks a{color:inherit !important;text-decoration:none !important;border-bottom:none !important;cursor:default !important}.hrefafterlinktext #wrapper a:link:after,.hrefafterlinktext #wrapper a:visited:after{content:" (" attr(href) ") ";font-size:90%;opacity:0.9}.nocodebreak pre{page-break-inside:avoid}img,table,figure{page-break-inside:avoid}.breakfootnotes .footnotes{page-break-before:always}.breakfootnotes .footnotes hr{display:none}#mktoctitle{display:block}#print-title{display:block;border-bottom:solid 1px #666}#wrapper pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{display:block}.task-list .task-list-item{list-style-type:none !important}.task-list .gh-complete.task-list-item .task-list-item-checkbox:before{content:'\2713';background:#838387}.task-list .task-list-item-checkbox{-webkit-appearance:none;position:relative}.task-list .task-list-item-checkbox:before{content:' ';border:solid 1px #aaa;width:1em;height:1em;display:block;border-radius:2px;left:-20px;top:-.75em;color:white;font-weight:bold;line-height:1;text-align:center;position:absolute}}
#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc,#wrapper #generated-toc-clone ul,#wrapper #mkreplaced-toc ul{list-style-position:inside}#wrapper #generated-toc-clone li.missing,#wrapper #mkreplaced-toc li.missing{list-style-type: none!important}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{list-style-type: upper-roman}#wrapper #generated-toc-clone>li>ul,#wrapper #mkreplaced-toc>li>ul {list-style-type: decimal}#wrapper #generated-toc-clone>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul{list-style-type: decimal-leading-zero}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul{list-style-type: lower-greek}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul{list-style-type: disc}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul>li>ul{list-style-type: square}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{list-style-position:outside!important;margin-left:2rem;}
</style>

<style id="mkprintstyles">@media print{#wrapper #generated-toc-clone,#generated-toc{display:none!important}
html,body,#wrapper{font-size:10pt!important}
}
</style>


</head>
<body class="normal firstload">
  <div id="wrapper">
      <h1 id="chapter3:datatypes">Chapter 3: Data Types</h1>

<p><a href="index.html">Return to all notes</a></p>

<h2 id="numerictypes">Numeric Types</h2>

<p>One of the first things that is important is a knowledge of how computers store numbers and other mathematical objects. You should review details of integers and floating point numbers in your Introduction to Computer Science text or the following wikipedia pages for further information:</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Integer_(computer_science\)">wikipedia&#8217;s page on integers</a></li>
<li><a href="http://en.wikipedia.org/wiki/Floating_point_numbers">wikipedia&#8217;s page on floating point numbers</a></li>
</ul>

<h2 id="juliasstandardnumbersandmathematicalobjects">Julia&#8217;s standard numbers and mathematical objects</h2>

<p>Since we are primarily using Julia in this class, there are a few extensions of the standard types of mathematical numbers. Specifically, rational numbers and complex numbers.<br/>
Julia has built-in number and other mathematical data types including those listed above in various sizes as well as rational numbers, matrices, and complex numbers. The following are links to the Julia documentation for</p>

<ul>
<li><a href="http://docs.julialang.org/en/latest/manual/integers-and-floating-point-numbers/">integers</a></li>
<li><a href="http://docs.julialang.org/en/latest/manual/integers-and-floating-point-numbers/">floating point</a></li>
<li><a href="http://docs.julialang.org/en/latest/manual/complex-and-rational-numbers/">rational numbers</a></li>
<li><a href="http://docs.julialang.org/en/latest/manual/complex-and-rational-numbers/">complex numbers</a></li>
</ul>

<h2 id="sizeofnumbers">Size of numbers</h2>

<p>Storing a single number on a computer takes certain amount of memory. There are a lot of specifics in the links above or in your Computer Science text, but in short there are different types of integer and floating point numbers. In Julia, there are 8, 16, 32, 64, 128 bit versions of integer (both signed and unsigned) and 16, 32 and 64 bit floating point numbers. For example, to set the number 1 as a 16 bit signed integer, type</p>
<pre><code class="(null)">Int8(1)</code></pre>

<p>and to determine the type of this (or anything), type <code>typeof(ans)</code> and it returns <code>Int8</code>. If you just enter <code>x=5</code> and then <code>typeof(5)</code> you should get <code>Int64</code> (or maybe <code>Int32</code> if you&#8217;re using a 32-bit machine )</p>

<p>If you type <code>typeof(3.0)</code> you will probably get <code>Float64</code>, but possibly <code>Float32</code>. </p>

<h2 id="scientificnotation">Scientific Notation</h2>

<p>Recall that any number written in decimal form with only a finite number of digits can be written in scientific notation that is in the form:<br/>
<span class="math">\[     a \times 10^b \]</span><br/>
where <span class="math">\(1<|a|<10\)</span> and <span class="math">\(b\)</span> is an integer. For example <span class="math">\(4003.23\)</span> can be written as <span class="math">\(4.00323 \times 10^3\)</span>, so <span class="math">\(a=4.00323\)</span> and <span class="math">\(b=3\)</span>.</p>

<p>In this form the number <span class="math">\(a\)</span>is often called the <strong>significand</strong> or <strong>mantissa</strong> and the number <span class="math">\(b\)</span> is <strong>exponent</strong>. This example has the base 10, however other bases are common (generally base 2). </p>

<p>One major advantage to using numbers in this form is the simple multiplication and division. Consider multiplying <span class="math">\(x=3.4 \times 10^2\)</span> and <span class="math">\(y=-4.7 \times 10^{-3}\)</span>. Using properties of exponentials we get<br/>
<span class="math">\[ xy = (3.4)(-4.7) \times 10^{2-3} = -15.98 \times 10^{-1}\]</span><br/>
and typically we would like to put this back into scientific notation by shifting the exponent so <span class="math">\(xy=-1.598 \times 10^{0}\)</span>.</p>

<p>Division can be done in a similar manner and perhaps surprisingly, addition and subtraction are more difficult due to the fact that the exponents of the two numbers need to be equal before adding and subtracting.</p>

<h2 id="binaryrepresentationofintegers">Binary Representation of integers</h2>

<p>Since ultimately all numbers are stored as binary, it may be helpful to know how that number is stored. The <code>bits</code> function will do this. If <code>x=Int8(3)</code>, and typing <code>bits(x)</code> returns <code>&quot;00000011&quot;</code>, where 1) notice that there are in fact 8 bits used and 2) this is 3 in binary. </p>

<h2 id="floatingpointnumbersofagivensize">Floating Point Numbers of a given size</h2>

<p>The reason for using floating point numbers in calculations is twofold. First, there is a finite size of storage for a number and secondly, routines for performing operations on floating-point numbers are fast and usually encoded on a computer chip. </p>

<p>Consider a floating point of a given size, say 64 bits generally called a <em>double precision floating point number</em>. The first bit is generally used for the sign, the next 11 are the exponent and the final 52 bits store the mantissa. A floating point number has two limitations and that is the precision (how many digits that can be stored) and the magnitude (the largest number). Double precision numbers are store in binary and converted to decimal with the form:<br/>
<span class="math">\[  
(-1)^s 2^{c-1023}(1+f)  
\]</span><br/>
where <span class="math">\(s\)</span> is the sign <span class="math">\(c\)</span> is the exponent and <span class="math">\(f\)</span> stores the mantissa. For example, consider the following number:<br/>
<span class="math">\[  
0\;10000000101\;0111011010000000000000000000000000000000000000000000  
\]</span><br/>
where spaces separate out <span class="math">\(s\)</span>, <span class="math">\(c\)</span> and <span class="math">\(f\)</span>. Converting <span class="math">\(c\)</span> to decimal:<br/>
<span class="math">\[  
c = 1 \cdot 2^{10} + 0 \cdot 2^9 + \cdots + 1 \cdot 2^2 + 0 \cdot 2^1 + 1 \cdot 2^0 = 1029  
\]</span><br/>
The mantissa is calculated in the following way</p>

<p><span class="math">\[  
f = 0 \cdot \biggl(\frac{1}{2}\biggr)^1 + 1 \cdot \biggl(\frac{1}{2}\biggr)^2 + 1 \cdot \biggl(\frac{1}{2}\biggr)^3 + 1 \cdot \biggl(\frac{1}{2}\biggr)^4 + 0 \cdot \biggl(\frac{1}{2}\biggr)^5 + 1 \cdot \biggl(\frac{1}{2}\biggr)^6  \\  
\qquad + 1 \cdot \biggl(\frac{1}{2}\biggr)^7 + 0 \cdot \biggl(\frac{1}{2}\biggr)^8 + 1 \cdot \biggl(\frac{1}{2}\biggr)^9 = \frac{237}{512}  
\]</span><br/>
and thus the floating point number is:<br/>
<span class="math">\[  
(-1)^0 2^{1029-1023} \biggl(1+\frac{237}{512}\biggr) = 93.625  
\]</span></p>

<p>The double precision number system falls into a class of number systems that we can commonly call floating-point number systems.</p>

<p>We can use the <code>bits</code> function in julia to find the binary representation. Notice that</p>
<pre><code class="(null)">bits(93.625)</code></pre>

<p>returns a string that is the binary representation above.</p>

<h2 id="exercise">Exercise</h2>

<ul>
<li>Play with other integers in 8-bit and see the representation.</li>
<li>How are negative numbers stored?</li>
<li>Examine other sizes of integers.</li>
<li>Examine the Unsigned versions of the integers.</li>
<li>Play with some floats of size 16, 32 or 64.</li>
</ul>

<h2 id="bigintsandbigfloats">BigInts and BigFloats</h2>

<p>As we saw in the previous chapter, sometimes you&#8217;ll run out of numbers (on the integer side) or precious when using a float. This is where <code>BigInt</code>s and <code>BigFloats</code> come in handy. A <code>BigInt</code> will grow as needed. Here&#8217;s an example. If you find powers of 10 as in</p>
<pre><code class="(null)">[10^i for i=10:20]</code></pre>

<p>one will see that up to <span class="math">\(10^{18}\)</span>, you get a reasonable number and then what happens? From 18 to 19 there&#8217;s a overflow error, however Julia does not report it as such by default. The following will report the overflow error and nearly does the same thing:</p>
<pre><code class="(null)">x=10^10
for i=1:20
    println(x)
    x=Base.checked_mul(x,10)
end</code></pre>

<p>Now if we do the following using BigInts:</p>
<pre><code class="(null)">[big(10)^i for i=10:20]</code></pre>

<p>then it gives what we expect. </p>

<h3 id="bigfloats">BigFloats</h3>

<p>Sometimes you may want more precision than a Float64 gives. For example, what if you want to calculate <span class="math">\(\pi\)</span> to 100 digits.<a href="#fn:1" id="fnref:1" title="see footnote" class="footnote">[1]</a> Although I won&#8217;t go through that, but we can generate a big float with value 1.0 using <code>x=big(1.0)</code> enter this in and you will get:</p>
<pre><code class="(null)">1.000000000000000000000000000000000000000000000000000000000000000000000000000000</code></pre>

<p>and you can count the number of zeros or you can determine the precision using <code>precision(x)</code> and this returns 256, which is the number of bits and it has 4 times the precision of <code>Float64</code>, which generally has about 16 decimal digits of accuracy, so this would have about 64 decimal digits. </p>

<p>You can get more precision using the <code>setprecision</code> function. For example:</p>
<pre><code class="(null)">setprecision(2^10)</code></pre>

<p>1024 (or each number is stored in 128 bytes of memory). Then typing <code>big(1.0)</code> returns:</p>
<pre><code class="(null)">1.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</code></pre>

<p>which has about 250 decimal digits of accuracy. </p>

<h3 id="usingbigfloatsandbigints">Using BigFloats and BigInts</h3>

<p>There&#8217;s a few things to notes about using BigInts and BigFloats. </p>

<ul>
<li>You may need to make sure that all calculations are done using the number of bits desired. For example:</li>
</ul>

<p><pre><code class="(null)">big(10^20)</code></pre></p>

<p>returns <code>7766279631452241920</code> which makes absolutely no sense. However,</p>

<p><pre><code class="(null)">big(10)^20</code></pre></p>

<p>returns what is expected. Why?</p>

<ul>
<li>It is generally slower to use BigInts and BigFloats than the 64-bit integers. So only use BigInts and BigFloats if you need the extra precision.</li>
</ul>

<h3 id="exercise">Exercise</h3>

<p>To check the latter, try writing a factorial function using <code>BigInt</code> test the time between the nonBig one and the Big one.</p>

<h2 id="rationalnumbers">Rational numbers</h2>

<p>A rational number is the ratio of integers and more commonly called a fraction. Julia (unlike many other general computing languages) has rational numbers built-in. To put in a ratio, enter a <code>//</code> to separate the numerator and denominator. For example:</p>
<pre><code class="(null)">2//3
4//7
178//11
-1//2</code></pre>

<p>are examples of rational numbers. One advantage that they have is that the numerator and denominator are stored as integers (64-bit by default) and are not subject to round-off errors that floating points are. The standard operations <span class="math">\(+,-,\cdot,\div\)</span></p>

<h3 id="exercise">Exercise</h3>

<p>Perform the following operations involving rationals in Julia:</p>

<ul>
<li><span class="math">\(\frac{1}{2} + \frac{2}{3}\)</span></li>
<li><span class="math">\(\frac{1}{2} - \frac{2}{3}\)</span></li>
<li><span class="math">\(\frac{2}{3} \cdot \frac{3}{5}\)</span></li>
<li><span class="math">\(\frac{2}{3} \div \frac{3}{5}\)</span></li>
</ul>

<h3 id="otheroperationswithrationals">Other Operations with Rationals</h3>

<p>As long as you stay in the basic operations, the result will be a rational. However, may other operations are not. For example <code>sin(1//2)</code> will return a floating-point number. <code>(2//3)^3</code> will return a rational but <code>(2//3)^(1//2)</code> will return a float (the square root of 2/3).</p>

<div class="footnotes">
<hr />
<ol>

<li id="fn:1">
<p>fn: And in fact, I calculated <span class="math">\(\pi\)</span> to about 100,000 digits for a talk in Spring 2016 using Julia <a href="#fnref:1" title="return to article" class="reversefootnote">&#160;&#8617;</a></p>
</li>

</ol>
</div>

<!-- ##END MARKED WRAPPER## -->
    </div>



<div style="display:none" markdown="0">
<!--This seemingly unnecessary div markup is the only thing keeping this script working after Markdown conversion. Trust me.-->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config();
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</div>


<script>(function(factory){if(typeof define==="function"&&define.amd){define("bidi_helpers",[],factory)}else{window.bidi_helpers=factory()}})(function(){var module={};module.Dir={RTL:-1,UNKNOWN:0,LTR:1};module.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"};module.ltrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";module.rtlChars_="\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC";module.ltrDirCheckRe_=new RegExp("^[^"+module.rtlChars_+"]*["+module.ltrChars_+"]");module.ltrCharReg_=new RegExp("["+module.ltrChars_+"]");module.hasAnyLtr=function(text){return module.ltrCharReg_.test(text)};module.rtlDirCheckRe_=new RegExp("^[^"+module.ltrChars_+"]*["+module.rtlChars_+"]");module.rtlRe=module.rtlDirCheckRe_;module.isRtlText=function(text){return module.rtlDirCheckRe_.test(text)};module.isLtrText=function(text){return module.ltrDirCheckRe_.test(text)};module.isRequiredLtrRe_=/^http:\/\/.*/;module.hasNumeralsRe_=/\d/;module.estimateDirection=function(text,detectionThreshold){var rtlCount=0;var totalCount=0;var hasWeaklyLtr=false;var tokens=text.split(/\s+/);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(module.isRtlText(token)){rtlCount++;totalCount++}else{if(module.isRequiredLtrRe_.test(token)){hasWeaklyLtr=true}else{if(module.hasAnyLtr(token)){totalCount++}else{if(module.hasNumeralsRe_.test(token)){hasWeaklyLtr=true}}}}}return totalCount==0?(hasWeaklyLtr?module.Dir.LTR:module.Dir.UNKNOWN):(rtlCount/totalCount>detectionThreshold?module.Dir.RTL:module.Dir.LTR)};return module});(function(factory){if(typeof define==="function"&&define.amd){define("bidiweb",["bidi_helpers"],factory)}else{window.bidiweb=factory(bidi_helpers)}})(function(bidi_helpers){var module={};var IProcessor={makeRtl:function(element){},makeLtr:function(element){}};var css_processor=function(classes){return{makeRtl:function(element){element.classList.add(classes.rtl)},makeLtr:function(element){element.classList.add(classes.ltr)}}};var style_processor=function(falign){return{makeRtl:function(element){element.style.direction="rtl";if(falign){element.style.textAlign="right"}},makeLtr:function(element){element.style.direction="ltr";if(falign){element.style.textAlign="left"}}}};module.processors={css:css_processor,style:style_processor};var nodeListMock=function(node){var list=[node];list.item=function(i){return list[i]};return list};module.process=function(query,processor){var elements;if(query instanceof NodeList){elements=query}else{if(query instanceof Node){elements=nodeListMock(query)}else{elements=document.querySelectorAll(query)}}module.process_elements(elements,processor);return elements};module.process_elements=function(elements,processor){for(var index=0;index<elements.length;index++){var element=elements.item(index);var text=element.textContent||element.value||element.placeholder||"";var dir=bidi_helpers.estimateDirection(text,0.4);if(dir==bidi_helpers.Dir.RTL){processor.makeRtl(element)}else{if(dir==bidi_helpers.Dir.LTR){processor.makeLtr(element)}}}};module.process_css=function(query,classes){var proc=module.processors.css(classes);return module.process(query,proc)};module.process_style=function(query,falign){var proc=module.processors.style(falign);return module.process(query,proc)};module.style=function(query){return module.process_style(query,true)};module.css=function(query){return module.process_css(query,{rtl:"rtl",ltr:"ltr"})};module.htmlToElement=function(html){var container=document.createElement("div");container.innerHTML=html;return container};module.html_css=function(html){var container=module.htmlToElement(html);var nodes=container.querySelectorAll("*");module.css(nodes);return container.innerHTML};module.html_style=function(html){var container=module.htmlToElement(html);var nodes=container.querySelectorAll("*");module.style(nodes);return container.innerHTML};return module});</script>

</body>
</html>